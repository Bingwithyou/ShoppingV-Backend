(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23f5cd85"],{"13d5":function(e,t,n){"use strict";var r=n("23e7"),o=n("d58f").left,i=n("a640"),a=n("ae40"),s=i("reduce"),c=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!s||!c},{reduce:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},a15b:function(e,t,n){"use strict";var r=n("23e7"),o=n("44ad"),i=n("fc6a"),a=n("a640"),s=[].join,c=o!=Object,u=a("join",",");r({target:"Array",proto:!0,forced:c||!u},{join:function(e){return s.call(i(this),void 0===e?",":e)}})},a4fa:function(e,t,n){"use strict";var r=n("b775"),o="/admin/acl/permission";t["a"]={getPermissionList:function(){return Object(r["a"])({url:"".concat(o),method:"get"})},removePermission:function(e){return Object(r["a"])({url:"".concat(o,"/remove/").concat(e),method:"delete"})},addPermission:function(e){return Object(r["a"])({url:"".concat(o,"/save"),method:"post",data:e})},updatePermission:function(e){return Object(r["a"])({url:"".concat(o,"/update"),method:"put",data:e})},toAssign:function(e){return Object(r["a"])({url:"".concat(o,"/toAssign/").concat(e),method:"get"})},doAssign:function(e,t){return Object(r["a"])({url:"".concat(o,"/doAssign"),method:"post",params:{roleId:e,permissionId:t}})}}},b5ab:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"20px"}},[n("el-input",{attrs:{disabled:"",value:e.$route.query.roleName}}),n("el-tree",{ref:"tree",staticStyle:{margin:"20px 0"},attrs:{data:e.allPermissions,"node-key":"id","show-checkbox":"","default-expand-all":"",props:e.defaultProps}}),n("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.save}},[e._v("保存")]),n("el-button",{on:{click:function(t){return e.$router.replace({name:"Role"})}}},[e._v("取消")])],1)},o=[],i=(n("13d5"),n("d3b7"),n("a15b"),n("ac1f"),n("5319"),n("caad"),n("2532"),n("a4fa")),a={name:"roleAuth",data:function(){return{loading:!1,allPermissions:[],defaultProps:{children:"children",label:"name"}}},created:function(){this.init()},methods:{init:function(){var e=this.$route.params.id;this.getPermissions(e)},getPermissions:function(e){var t=this;i["a"].toAssign(e).then((function(e){var n=e.data.children;t.allPermissions=n;var r=t.getCheckedIds(n);t.$refs.tree.setCheckedKeys(r)}))},getCheckedIds:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.reduce((function(e,r){return r.select&&4===r.level?e.push(r.id):r.children&&t.getCheckedIds(r.children,n),e}),n)},save:function(){var e=this,t=this.$refs.tree.getCheckedKeys().join(",");this.loading=!0,i["a"].doAssign(this.$route.params.id,t).then((function(t){e.loading=!1,e.$message.success(t.$message||"分配权限成功");var n=e.$route.query.roleName,r=e.$store.getters.roles;e.$router.replace("/acl/role/list",(function(){console.log("replace onComplete"),r.includes(n)&&window.location.reload()}))}))}}},s=a,c=n("2877"),u=Object(c["a"])(s,r,o,!1,null,null,null);t["default"]=u.exports},d58f:function(e,t,n){var r=n("1c0b"),o=n("7b0b"),i=n("44ad"),a=n("50c4"),s=function(e){return function(t,n,s,c){r(n);var u=o(t),l=i(u),d=a(u.length),f=e?d-1:0,h=e?-1:1;if(s<2)while(1){if(f in l){c=l[f],f+=h;break}if(f+=h,e?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;e?f>=0:d>f;f+=h)f in l&&(c=n(c,l[f],f,u));return c}};e.exports={left:s(!1),right:s(!0)}}}]);