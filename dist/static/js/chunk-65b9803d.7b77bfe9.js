(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65b9803d"],{"1d33":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button",{staticStyle:{margin:"10px 0"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.dialogVisible=!0,t.tmForm={tmName:"",logoUrl:""}}}},[t._v("添加")]),a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.records}},[a("el-table-column",{attrs:{prop:"id",label:"序号",width:"80px",align:"center"}}),a("el-table-column",{attrs:{prop:"tmName",label:"品牌名称",width:"width"}}),a("el-table-column",{attrs:{prop:"logoUrl",label:"LOGO",width:"width"},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.logoUrl,alt:"logo image"}})]}}])}),a("el-table-column",{attrs:{prop:"prop",label:"操作",width:"width"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("el-button",{attrs:{type:"warning",icon:"el-icon-edit",size:"mini"},on:{click:function(e){return t.updateTradeMark(r)}}},[t._v("修改")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(e){return t.deleteTradeMark(r)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"20px","text-align":"center"},attrs:{"current-page":t.page,"page-sizes":[3,5,10],"page-size":t.limit,"page-count":7,total:t.total,layout:"prev, pager, next, jumper, ->, sizes, total"},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}}),a("el-dialog",{attrs:{title:t.tmForm.id?"修改":"添加",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"ruleForm",staticStyle:{width:"80%"},attrs:{model:t.tmForm,rules:t.rules}},[a("el-form-item",{attrs:{label:"品牌名称","label-width":"100px",prop:"tmName"}},[a("el-input",{model:{value:t.tmForm.tmName,callback:function(e){t.$set(t.tmForm,"tmName",e)},expression:"tmForm.tmName"}})],1),a("el-form-item",{attrs:{label:"LOGO","label-width":"100px",prop:"logoUrl"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/dev-api/admin/product/fileUpload","on-success":t.handleAvatarSuccess,"show-file-list":!1}},[t.tmForm.logoUrl?a("img",{staticClass:"avatar",attrs:{src:t.tmForm.logoUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传jpg/png文件, 且不超过500kb ")])])],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addOrUpdateTradeMark}},[t._v("确 定")])],1)],1)],1)},i=[],o=a("c7eb"),n=a("1da1"),l={name:"tradeMark",data:function(){return{page:1,limit:5,total:0,records:[],dialogVisible:!1,tmForm:{tmName:"",logoUrl:""},rules:{tmName:[{required:!0,message:"品牌名称不能为空",trigger:"blur"},{min:2,max:10,message:"长度2-10个字符",trigger:"blur"}],logoUrl:[{required:!0,message:"图片不能为空"}]}}},methods:{getPageList:function(){var t=this;return Object(n["a"])(Object(o["a"])().mark((function e(){var a,r,i;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.page,r=t.limit,e.next=3,t.$API.trademark.reqTradeMarkList(a,r);case 3:i=e.sent,200==i.code&&(t.total=i.data.total,t.records=i.data.records);case 5:case"end":return e.stop()}}),e)})))()},handleCurrentChange:function(t){this.page=t,this.getPageList()},handleSizeChange:function(t){this.limit=t,this.getPageList()},handleAvatarSuccess:function(t,e){this.tmForm.logoUrl=t.data},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a},updateTradeMark:function(t){this.tmForm.id="",this.dialogVisible=!0,this.tmForm.tmName=t.tmName,this.tmForm.logoUrl=t.logoUrl,this.tmForm.id=t.id},deleteTradeMark:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$API.trademark.reqDeleteTradeMark(t.id);case 2:e.$message({type:"success",message:"删除成功!"}),e.getPageList();case 4:case"end":return a.stop()}}),a)})))).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},addOrUpdateTradeMark:function(){var t=this;this.$refs.ruleForm.validate(function(){var e=Object(n["a"])(Object(o["a"])().mark((function e(a){var r;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=6;break}return t.dialogVisible=!1,e.next=4,t.$API.trademark.reqAddOrUpdateTradeMark(t.tmForm);case 4:r=e.sent,200==r.code&&(t.$message(t.tmForm.id?"修改成功":"添加品牌成功"),t.getPageList());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},mounted:function(){this.getPageList()}},s=l,c=(a("5b0c"),a("2877")),d=Object(c["a"])(s,r,i,!1,null,"1a7e40fa",null);e["default"]=d.exports},"5b0c":function(t,e,a){"use strict";a("9f60")},"9f60":function(t,e,a){}}]);