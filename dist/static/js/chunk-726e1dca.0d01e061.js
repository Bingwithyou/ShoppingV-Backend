(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-726e1dca"],{"542f":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticStyle:{"margin-bottom":"20px"}},[a("Category-Select",{attrs:{show:!t.isShowTable},on:{getCategoryId:t.getCategoryId}})],1),a("el-card",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowTable,expression:"isShowTable"}]},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",disabled:!t.category3Id},on:{click:t.addAttr}},[t._v("添加属性")]),a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.attrList}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"attrName",label:"属性名称",width:"150"}}),a("el-table-column",{attrs:{prop:"prop",label:"属性值列表",width:"width"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return t._l(r.attrValueList,(function(e){return a("el-tag",{key:e.id,staticStyle:{margin:"0 10px"},attrs:{type:"success"}},[t._v(t._s(e.valueName))])}))}}])}),a("el-table-column",{attrs:{prop:"prop",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("el-button",{attrs:{type:"warning",icon:"el-icon-edit",size:"mini"},on:{click:function(e){return t.updateAttr(r)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(e){return t.deleteExistAttr(r)}}})]}}])})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isShowTable,expression:"!isShowTable"}]},[a("el-form",{ref:"form",attrs:{inline:!0,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"属性名"}},[a("el-input",{ref:"inputAttrName",attrs:{placeholder:"请输入属性名"},model:{value:t.attrInfo.attrName,callback:function(e){t.$set(t.attrInfo,"attrName",e)},expression:"attrInfo.attrName"}})],1)],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",disabled:t.isInputDone},on:{click:t.addAttrValue}},[t._v("添加属性值")]),a("el-table",{staticStyle:{width:"100%",margin:"20px 0"},attrs:{border:"",data:t.attrInfo.attrValueList}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"prop",label:"属性值名称",width:"width"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[r.isShow?a("el-input",{ref:"editInput",attrs:{placeholder:"请输入属性值名称",size:"mini"},on:{blur:function(e){return t.confirmInput(r)}},nativeOn:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;r.isShow=!1}},model:{value:r.valueName,callback:function(e){t.$set(r,"valueName",e)},expression:"row.valueName"}}):a("span",{staticStyle:{display:"block",height:"20px"},on:{click:function(e){return t.editInput(r)}}},[t._v(t._s(r.valueName))])]}}])}),a("el-table-column",{attrs:{prop:"prop",label:"操作",width:"width"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.$index;return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(e){return t.deleteAttr(r)}}})]}}])})],1),a("el-button",{attrs:{type:"primary",disabled:t.attrInfo.attrValueList.length<1},on:{click:t.addOrUpdateAttr}},[t._v("保存")]),a("el-button",{attrs:{disabled:t.isCancel},on:{click:function(e){t.isShowTable=!0}}},[t._v("取消")])],1)])],1)},n=[],i=a("c7eb"),s=a("1da1"),o=(a("498a"),a("d3b7"),a("159b"),a("a434"),a("4de4"),a("0644")),l=a.n(o),c={name:"Attr",data:function(){return{category1Id:"",category2Id:"",category3Id:"",attrList:[],isShowTable:!0,isCancel:!1,isInputDone:!1,attrInfo:{attrName:"",attrValueList:[],categoryId:0,categoryLevel:3}}},methods:{getCategoryId:function(t){this.category1Id=t.category1Id,this.category2Id=t.category2Id,this.category3Id=t.category3Id,this.getAttrList()},getAttrList:function(){var t=this;return Object(s["a"])(Object(i["a"])().mark((function e(){var a,r,n,s;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.category1Id,r=t.category2Id,n=t.category3Id,e.next=3,t.$API.attr.reqAttrList(a,r,n);case 3:s=e.sent,200==s.code&&(t.attrList=s.data);case 5:case"end":return e.stop()}}),e)})))()},addAttrValue:function(){var t=this;1==this.isCancel?this.$message("需要先完成当前输入"):""==this.attrInfo.attrName.trim()?this.$message("属性名不能为空"):(this.attrInfo.attrValueList.push({attrId:void 0,valueName:"",isShow:!0}),this.$nextTick((function(){return t.$refs.editInput.focus()})),this.isCancel=!0)},addAttr:function(){var t=this;this.isShowTable=!1,this.attrInfo={attrName:"",attrValueList:[],categoryId:this.category3Id,categoryLevel:3},this.$nextTick((function(){return t.$refs.inputAttrName.focus()}))},updateAttr:function(t){var e=this;this.isShowTable=!1,this.attrInfo=l()(t),this.attrInfo.attrValueList.forEach((function(t){e.$set(t,"isShow",!1)}))},deleteAttr:function(t){this.attrInfo.attrValueList.splice(t,1)},deleteExistAttr:function(t){var e=this;return Object(s["a"])(Object(i["a"])().mark((function a(){var r,n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.attrValueList[0].attrId,a.next=3,e.$API.attr.reqDeleteAttr(r);case 3:n=a.sent,200==n.code?(e.$message({type:"success",message:"删除成功"}),e.getAttrList()):e.$message({type:"warning",message:"删除失败，code: ".concat(n.code)});case 5:case"end":return a.stop()}}),a)})))()},editInput:function(t){var e=this;t.isShow=!0,this.$nextTick((function(){return e.$refs.editInput.focus()})),this.isCancel=!0,this.isInputDone=!0},confirmInput:function(t){var e=this.attrInfo.attrValueList.some((function(e){if(t!==e)return t.valueName==e.valueName}));""==t.valueName.trim()?this.$message("属性值不能为空"):e?this.$message("属性值不能相同"):(t.isShow=!1,this.isCancel=!1,this.isInputDone=!1)},addOrUpdateAttr:function(){var t=this;return Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.attrInfo.attrValueList=t.attrInfo.attrValueList.filter((function(t){if(""!=t.valueName)return delete t.isShow,!0})),e.prev=1,e.next=4,t.$API.attr.reqAddOrUpdateAttr(t.attrInfo);case 4:t.$message({type:"success",message:"保存成功"}),t.getAttrList(),t.isShowTable=!0,t.isCancel=!1,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),console.warn(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))()}}},u=c,d=a("2877"),f=Object(d["a"])(u,r,n,!1,null,"ef395fac",null);e["default"]=f.exports},a434:function(t,e,a){"use strict";var r=a("23e7"),n=a("23cb"),i=a("a691"),s=a("50c4"),o=a("7b0b"),l=a("65f0"),c=a("8418"),u=a("1dde"),d=a("ae40"),f=u("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,m=Math.min,b=9007199254740991,w="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f||!p},{splice:function(t,e){var a,r,u,d,f,p,g=o(this),v=s(g.length),y=n(t,v),I=arguments.length;if(0===I?a=r=0:1===I?(a=0,r=v-y):(a=I-2,r=m(h(i(e),0),v-y)),v+a-r>b)throw TypeError(w);for(u=l(g,r),d=0;d<r;d++)f=y+d,f in g&&c(u,d,g[f]);if(u.length=r,a<r){for(d=y;d<v-r;d++)f=d+r,p=d+a,f in g?g[p]=g[f]:delete g[p];for(d=v;d>v-r+a;d--)delete g[d-1]}else if(a>r)for(d=v-r;d>y;d--)f=d+r-1,p=d+a-1,f in g?g[p]=g[f]:delete g[p];for(d=0;d<a;d++)g[d+y]=arguments[d+2];return g.length=v-r+a,u}})}}]);